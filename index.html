<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Enchantment By Design ‚Äì 3D Viewer</title>

  <!-- model-viewer library -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #05070b;
      color: #f5f5f5;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    model-viewer {
      width: 100vw;
      height: 100vh;
      outline: none;
      touch-action: none; /* stop page scrolling while rotating */
    }

    .brand {
      position: fixed;
      top: 8px;
      left: 12px;
      font-size: 11px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      opacity: 0.7;
      pointer-events: none;
    }

    .hint {
      position: fixed;
      bottom: 10px;
      left: 0;
      right: 0;
      text-align: center;
      font-size: 11px;
      opacity: 0.7;
      pointer-events: none;
    }

    @media (pointer: coarse) {
      .hint { font-size: 12px; }
    }
  </style>
</head>
<body>

  <div class="brand">Enchantment By Design</div>

   <model-viewer
    id="pendantViewer"
    src="model.glb"
    camera-controls
    autoplay
    interaction-prompt="auto"
    interaction-prompt-style="wiggle"
    touch-action="none"
    environment-image="neutral"
    tone-mapping="neutral"
    exposure="1.1"
    shadow-intensity="1"
    shadow-softness="0.6"
    rotation-per-second="0deg"
    ar
    ar-modes="scene-viewer webxr quick-look"
    alt="Gold pendant with Montana sapphire-like stone">
  </model-viewer>

  <script type="module">
  const viewer = document.querySelector('model-viewer');

  viewer.addEventListener('load', () => {
    const gold = viewer.model.getMaterialByName('Default');
    const sapphire = viewer.model.getMaterialByName('Sapphire');

    // -----------------------------
    //  GOLD ‚Äî Soft buttery 18k PBR
    // -----------------------------
    gold.pbrMetallicRoughness.setBaseColorFactor([1.00, 0.84, 0.38, 1.0]); 
    gold.pbrMetallicRoughness.setMetallicFactor(1.0);
    gold.pbrMetallicRoughness.setRoughnessFactor(0.18);

    // -----------------------------
    //  SAPPHIRE ‚Äî Montana Blue
    // -----------------------------
    sapphire.pbrMetallicRoughness.setBaseColorFactor([0.05, 0.22, 0.55, 0.85]); 
    sapphire.pbrMetallicRoughness.setMetallicFactor(0.0);
    sapphire.pbrMetallicRoughness.setRoughnessFactor(0.05);

    // Proper gemstone transparency
    sapphire.setAlphaMode("BLEND");
    sapphire.setAlphaCutoff(0.05);
  });
</script>


  <div class="hint">Drag to rotate ¬∑ Pinch to zoom ¬∑ Tap ‚ÄúView in your space‚Äù on Android for AR</div>

  <script type="module">
    const mv = document.getElementById('pendantViewer');

    mv.addEventListener('load', () => {
      const model = mv.model;
      if (!model) return;

      const materials = model.materials || [];

      // Try to guess which material is gold and which is the stone
      const goldMat =
        materials.find(m =>
          /gold|metal|ring|rope/i.test(m.name)) || materials[0];

      const stoneMat =
        materials.find(m =>
          /stone|gem|sapp|montana|topaz/i.test(m.name)) || materials[1];

      // Helper so this doesn't explode if something is missing
      function setPBR(mat, { base, metal, rough }) {
        if (!mat || !mat.pbrMetallicRoughness) return;
        if (base)   mat.pbrMetallicRoughness.setBaseColorFactor(base);
        if (metal !== undefined)  mat.pbrMetallicRoughness.setMetallicFactor(metal);
        if (rough !== undefined)  mat.pbrMetallicRoughness.setRoughnessFactor(rough);
      }

      // üé® Soft buttery gold (18k-ish, not too yellow)
      // RGBA in 0‚Äì1 range
      // hex-ish: #F8E0A5
      setPBR(goldMat, {
        base:  [0.97, 0.88, 0.65, 1.0],
        metal: 1.0,
        rough: 0.16
      });

      // üíé Montana blue stone ‚Äì medium deep blue-green
      // hex-ish: #1B6A8C
      if (stoneMat && stoneMat.pbrMetallicRoughness) {
        stoneMat.pbrMetallicRoughness.setBaseColorFactor([0.11, 0.41, 0.55, 1.0]);
        stoneMat.pbrMetallicRoughness.setMetallicFactor(0.0);  // dielectric, not metal
        stoneMat.pbrMetallicRoughness.setRoughnessFactor(0.08);
      }

      // Optional: if your gem material supports transmission extension,
      // you could push some transparency here, but that requires the
      // GLB to include KHR_materials_transmission when exported.
    });
  </script>
</body>
</html>



